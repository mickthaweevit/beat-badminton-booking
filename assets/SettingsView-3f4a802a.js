import{d as y,r as i,c as m,a as t,w as a,v as g,b as k,e as r,n as S,t as w,f as I,g as p,o as v}from"./index-8715a0c7.js";const V={class:"settings"},C={class:"bg-white p-6 rounded-lg shadow-md"},G={class:"mb-4"},H={class:"mb-4"},U={class:"mt-8 bg-white p-6 rounded-lg shadow-md"},h={class:"mb-4"},D={class:"mb-4"},T={class:"flex flex-wrap gap-2"},B={class:"inline-flex items-center"},N={class:"inline-flex items-center"},M={class:"inline-flex items-center"},E={class:"inline-flex items-center"},F={class:"inline-flex items-center"},O=y({__name:"SettingsView",setup(_){const d=i(""),b=i(""),u=i("18:00-19:00"),l=i(["3"]),o=i(null),c=()=>{localStorage.setItem("github_repo",d.value),localStorage.setItem("github_token",b.value),alert("GitHub settings saved!")},f=()=>{localStorage.setItem("default_time",u.value),localStorage.setItem("autobook_days",JSON.stringify(l.value)),alert("Booking defaults saved locally!")},x=async()=>{if(!p.isConfigured()){o.value={success:!1,message:"GitHub is not configured. Please set up your repository and token first."};return}try{const n={defaultTime:u.value,autobookDays:l.value.map(Number)};await p.updateConfigFile("booking-config.json",n)?(o.value={success:!0,message:"GitHub configuration updated successfully!"},setTimeout(()=>{var s;(s=o.value)!=null&&s.success&&(o.value=null)},3e3)):o.value={success:!1,message:"Failed to update GitHub configuration."}}catch(n){o.value={success:!1,message:`Error: ${n.message}`}}};if(localStorage.getItem("github_repo")&&(d.value=localStorage.getItem("github_repo")||""),localStorage.getItem("github_token")&&(b.value=localStorage.getItem("github_token")||""),localStorage.getItem("default_time")&&(u.value=localStorage.getItem("default_time")||"18:00-19:00"),localStorage.getItem("autobook_days"))try{l.value=JSON.parse(localStorage.getItem("autobook_days")||'["3"]')}catch(n){console.error("Error parsing autobook days",n)}return(n,e)=>(v(),m("div",V,[e[21]||(e[21]=t("h1",{class:"text-2xl font-bold mb-6"},"Settings",-1)),t("div",C,[e[11]||(e[11]=t("h2",{class:"text-xl font-semibold mb-4"},"GitHub Integration",-1)),t("div",G,[e[8]||(e[8]=t("label",{class:"block text-gray-700 mb-2"},"GitHub Repository",-1)),a(t("input",{type:"text",class:"w-full p-2 border rounded",placeholder:"username/repository","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},null,512),[[g,d.value]])]),t("div",H,[e[9]||(e[9]=t("label",{class:"block text-gray-700 mb-2"},"GitHub Token",-1)),a(t("input",{type:"password",class:"w-full p-2 border rounded",placeholder:"ghp_xxxxxxxxxxxx","onUpdate:modelValue":e[1]||(e[1]=s=>b.value=s)},null,512),[[g,b.value]]),e[10]||(e[10]=t("p",{class:"text-sm text-gray-500 mt-1"}," Needs permissions: repo, workflow ",-1))]),t("button",{class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:c}," Save Settings ")]),t("div",U,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold mb-4"},"Booking Defaults",-1)),t("div",h,[e[13]||(e[13]=t("label",{class:"block text-gray-700 mb-2"},"Default Booking Time",-1)),a(t("select",{class:"w-full p-2 border rounded","onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s)},e[12]||(e[12]=[t("option",{value:"18:00-19:00"},"18:00 - 19:00",-1),t("option",{value:"19:00-20:00"},"19:00 - 20:00",-1),t("option",{value:"20:00-21:00"},"20:00 - 21:00",-1)]),512),[[k,u.value]])]),t("div",D,[e[19]||(e[19]=t("label",{class:"block text-gray-700 mb-2"},"Auto-book Days",-1)),t("div",T,[t("label",B,[a(t("input",{type:"checkbox",class:"form-checkbox",value:"1","onUpdate:modelValue":e[3]||(e[3]=s=>l.value=s)},null,512),[[r,l.value]]),e[14]||(e[14]=t("span",{class:"ml-2"},"Monday",-1))]),t("label",N,[a(t("input",{type:"checkbox",class:"form-checkbox",value:"2","onUpdate:modelValue":e[4]||(e[4]=s=>l.value=s)},null,512),[[r,l.value]]),e[15]||(e[15]=t("span",{class:"ml-2"},"Tuesday",-1))]),t("label",M,[a(t("input",{type:"checkbox",class:"form-checkbox",value:"3","onUpdate:modelValue":e[5]||(e[5]=s=>l.value=s)},null,512),[[r,l.value]]),e[16]||(e[16]=t("span",{class:"ml-2"},"Wednesday",-1))]),t("label",E,[a(t("input",{type:"checkbox",class:"form-checkbox",value:"4","onUpdate:modelValue":e[6]||(e[6]=s=>l.value=s)},null,512),[[r,l.value]]),e[17]||(e[17]=t("span",{class:"ml-2"},"Thursday",-1))]),t("label",F,[a(t("input",{type:"checkbox",class:"form-checkbox",value:"5","onUpdate:modelValue":e[7]||(e[7]=s=>l.value=s)},null,512),[[r,l.value]]),e[18]||(e[18]=t("span",{class:"ml-2"},"Friday",-1))])])]),t("div",{class:"flex space-x-4"},[t("button",{class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:f}," Save Locally "),t("button",{class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:x}," Save to GitHub ")]),o.value?(v(),m("div",{key:0,class:S(["mt-4",o.value.success?"text-green-600":"text-red-600"])},w(o.value.message),3)):I("",!0)])]))}});export{O as default};
